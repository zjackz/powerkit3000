# Kickstarter 数据前端界面规划

## 目标与背景
- 为跨境电商选品提供直观的数据浏览与分析入口。
- 在现有 PowerKit3000 数据管道（Postgres + Console 导入）的基础上，提供自助查询界面，提高团队效率。
- 先实现内部使用的 MVP，后续可扩展为可视化分析和自动化推荐。

## 核心用户故事
- 作为运营，我想按国家、品类、项目状态筛选 Kickstarter 项目，快速定位潜力商品。
- 作为分析师，我想查看项目的关键指标（筹资金额、支持者、达成率、上线时间）以评估市场趋势。
- 作为团队负责人，我希望导出筛选结果或将项目收藏，方便会议沟通。

## 技术选型
- **前端框架**：React + Vite（轻量、启动快、生态成熟），配 TypeScript 保障可维护性。
- **组件库**：Ant Design（内置表格、筛选、图表生态丰富）。
- **数据可视化**：Ant Design Charts 或 ECharts（后续趋势分析用，MVP 可暂缓）。
- **状态管理**：React Query 负责数据请求与缓存；局部 UI 状态用 React 内置状态。
- **样式**：CSS Modules + Tailwind（Antd 默认主题即可，如需品牌化再自定义）。

## 系统架构概览
```
CLI 导入 -> Postgres (AppDb) <- ASP.NET Core Minimal API -> React 前端
```
- **API 层**：在现有解决方案中新增 `PowerKit3000.Api`（ASP.NET Core Minimal API），提供 REST 接口：
  - `GET /projects`：分页、筛选（state/country/category/goal 区间/时间范围）。
  - `GET /projects/{id}`：单项目详情。
  - `GET /filters`：返回可选国家、品类、状态列表。
  - `GET /projects/summary`：仪表盘指标（总量、成功率、覆盖国家等），支持时间/国家/品类筛选。
  - `GET /analytics/categories`：类目分组成功率、平均筹资等统计（支持过滤）。
  - `GET /analytics/countries`：国家维度成功率与筹资规模（支持过滤）。
  - `GET /analytics/top-projects`：按达成率排序的高潜项目榜（支持过滤）。
  - `GET /analytics/monthly-trend`：按月统计总项目/成功项目趋势（支持过滤）。
  - `GET /analytics/funding-distribution`：筹资达成率区间分布（支持过滤）。
  - `GET /analytics/creators`：创作者成功率、平均达成率榜单（支持过滤）。
- **认证**：MVP 内部使用，可通过 Basic Auth 或反向代理控制。后续可接入 Azure AD / OAuth。
- **部署**：前后端均可 Docker 化；初期可在公司内网服务器上运行（Nginx 反代 + systemd）。

## 界面模块规划
1. **登录/访问控制（可选）**
   - 简单密码页或网关保护。

2. **项目列表页（MVP 核心）**
   - 顶部筛选器：国家（多选）、品类、项目状态、日期范围、达成率/筹资金额区间。
   - 表格列：项目名、品类、国家、状态、目标金额、实收金额、达成率、支持者、上线时间。
   - 支持分页、排序（筹资金额、达成率）。
   - 行操作：查看详情、收藏（本地存储实现）。

3. **项目详情抽屉/页**
   - 展示项目完整信息（blurb、creator、location、urls、资金指标）。
   - 日后可加入趋势图（如 pledged 随时间变化，需补充数据）。

4. **分析面板（迭代）**
   - 成功率热力图：按国家/品类组合展示成功率。
   - 筹资金额分布图：直方图或箱线图。
   - TOP 项目榜单：按达成率或 pledged 排名。

5. **导出/收藏**
   - 导出当前筛选结果为 CSV。
   - 收藏列表（本地存储）或存储在后端（需新表）。

## 数据接口与模型
- 前端使用 DTO（Data Transfer Object）字段：
  ```ts
  type ProjectListItem = {
    id: number;
    name: string;
    categoryName: string;
    country: string;
    state: string;
    goal: number;
    pledged: number;
    percentFunded: number;
    backersCount: number;
    launchedAt: string;
  };
  ```
- API 接口参数示例：
  `/projects?page=1&pageSize=50&state=successful&country=US&category=Design&minPercentFunded=100`
- 后端需在查询层添加分页/筛选逻辑，可复用现有查询命令中 LINQ（建议封装服务层，供 API 与 CLI 共享）。

## 性能与可扩展性
- 默认分页大小 50，最大 200，避免一次性加载 1 万条数据。
- 使用数据库索引：`state`, `country`, `category_id`, `launched_at`, `percent_funded`。
- React Query 缓存最近的查询结果，减少重复请求。
- 预留 GraphQL 接口可能性（未来复杂分析时使用）。

## 开发阶段拆分
1. **准备阶段（1 周）**
   - 生成 API 项目骨架（Minimal API）。
   - 提取共享查询服务（Core 层）。
   - 定义 Swagger/OpenAPI，编写基本单元测试。

2. **MVP 前端（1.5~2 周）**
   - Vite + Antd 项目初始化，搭建路由与布局。
   - 实现项目列表页、筛选器、详情抽屉。
   - 接入 API，使用 React Query 管理数据。
   - 编写 Cypress/Playwright 冒烟测试。

3. **增强与分析模块（后续迭代）**
   - 收藏、导出功能。
   - 可视化图表与趋势分析。
   - 统一认证与部署优化。

## 风险与缓解
- **数据量大/查询慢**：提前加索引，必要时引入 ElasticSearch。
- **需求变动**：MVP 先聚焦筛选 + 表格，后续按优先级扩展。
- **安全性**：内部网络部署 + 简易身份验证，产品化时需加固。
- **多语言需求**：初版中文 UI，若需多语言可使用 i18n 方案。

## 验收标准
- 能通过前端界面完成常见筛选并加载数据，响应时间 < 3s。
- API 由 Swagger 文档说明，可通过 Postman 调试。
- 关键路径具备自动化测试（API 单测 + 前端冒烟）。
- 文档更新（使用说明、部署指南）。
