# PowerKit3000 核心数据字典

> 本文聚焦核心业务表的关键字段，帮助前后端、数据分析与运营在讨论指标时保持统一口径。详细模型定义见 `backend/pk.data/Models`，下方字段名称若与数据库实际列名不同，会在备注中注明。

## 1. Kickstarter 领域

### 1.1 表：`kickstarter_projects` (`KickstarterProject`)
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 项目唯一标识（与 Kickstarter 源数据一致）。 |
| `name` / `name_cn` | text | 项目英文/中文名称，前端优先展示中文。 |
| `blurb` / `blurb_cn` | text | 项目简介（原文/翻译）。 |
| `goal` | numeric | 目标筹资金额，单位为 `currency`。 |
| `pledged` | numeric | 已筹金额。 |
| `percent_funded` | numeric | 达成率，`pledged/goal*100`，用于热度标签。 |
| `backers_count` | integer | 支持者数量。 |
| `currency` | text | 货币代码（例如 USD）。 |
| `state` | text | 项目状态：`successful` / `live` / `failed` 等。 |
| `country` | text | ISO 国家码，前端根据词典映射中文名。 |
| `launched_at` / `deadline` | timestamp | 上线时间与截止时间，用于趋势与筛选。 |
| `creator_id` | bigint | 关联 `creators` 表。 |
| `category_id` | bigint | 关联 `categories` 表。 |
| `location_id` | bigint | 关联 `locations` 表，可为空。 |
| `usd_pledged` / `usd_exchange_rate` | numeric | 美元口径金额与汇率，用于跨币种分析。 |

### 1.2 表：`creators`
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 创作者标识。 |
| `name` | text | 创作者名称。 |

### 1.3 表：`categories`
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 类目标识。 |
| `name` | text | 类目名称。 |
| `slug` | text | URL 友好名称。 |
| `parent_id` | bigint | 父类目 ID，可为空。 |

### 1.4 表：`locations`
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 地点标识。 |
| `name` | text | 城市名称。 |
| `displayable_name` | text | 完整展示名称（含国家/州）。 |
| `country` | text | 国家码。 |
| `state` | text | 州/省。 |

### 1.5 表：`project_favorites`
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 收藏记录标识。 |
| `client_id` | text | 客户端标识（前端本地存储生成）。 |
| `project_id` | bigint | 关联项目。 |
| `note` | text | 收藏备注。 |
| `created_at` / `updated_at` | timestamp | 记录维护时间。 |

## 2. Amazon 榜单子域

### 2.1 表：`amazon_categories` (`AmazonCategory`)
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | integer | 内部主键。 |
| `name` | text | 类目名称。 |
| `amazon_category_id` | text | Amazon 站内类目 ID。 |
| `parent_category_id` | integer | 父类目 ID，可为空。 |

### 2.2 表：`amazon_products` (`AmazonProduct`)
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | text | ASIN，作为主键。 |
| `title` | text | 商品标题。 |
| `brand` | text | 品牌，可为空。 |
| `category_id` | integer | 关联 Amazon 类目。 |
| `listing_date` | timestamp | 上架时间（若采集到）。 |
| `image_url` | text | 主图 URL。 |

### 2.3 表：`amazon_snapshots` (`AmazonSnapshot`)
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 快照主键。 |
| `captured_at` | timestamp | 抓取时间。 |
| `category_id` | integer | 对应类目。 |
| `bestseller_type` | text | 榜单类型（`Top100`、`MoversAndShakers` 等）。 |
| `status` | text | 任务状态：`Succeeded` / `Failed` 等。 |
| `error_message` | text | 失败原因，可为空。 |

### 2.4 表：`amazon_product_data_points` (`AmazonProductDataPoint`)
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 数据点标识。 |
| `product_id` | text | 关联 ASIN。 |
| `snapshot_id` | bigint | 关联快照。 |
| `captured_at` | timestamp | 采集时间。 |
| `rank` | integer | 榜单排名。 |
| `price` | numeric | 价格（若能解析）。 |
| `rating` | real | 评分（1~5），可为空。 |
| `reviews_count` | integer | 评论数量，可为空。 |

### 2.5 表：`amazon_trends` (`AmazonTrend`)
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 趋势记录标识。 |
| `product_id` | text | 关联 ASIN。 |
| `snapshot_id` | bigint | 关联快照。 |
| `trend_type` | text | 趋势分类：`NewEntry` / `RankSurge` / `ConsistentPerformer`。 |
| `description` | text | 趋势描述，用于前端展示。 |
| `recorded_at` | timestamp | 趋势生成时间。 |

### 2.6 表：`amazon_tasks` (`AmazonTask`)
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| `id` | bigint | 任务标识。 |
| `category_id` | integer | 对应类目。 |
| `bestseller_type` | text | 榜单类型。 |
| `status` | text | 当前状态。 |
| `created_at` / `updated_at` | timestamp | 任务维护时间。 |

## 3. 指标对齐速查

| 前端指标 | 数据来源 | 说明 |
| --- | --- | --- |
| 项目列表达成率 / 筹资总额 | `kickstarter_projects.percent_funded` / `pledged` | 若需要统一货币，换算 `usd_pledged`。 |
| Dashboard 成功率 | `successfulProjects / totalProjects` 来源于 API / `KickstarterProjectQueryService` 聚合。 |
| 爆款潜力榜 | `analytics/hype` → `percent_funded` + `funding_velocity` 聚合结果。 |
| Amazon 核心指标 | `amazon_product_data_points` & `amazon_trends`（最新快照） | API 端聚合后返回。 |
| Amazon 历史趋势 | `amazon_product_data_points` | 以 `captured_at` 时间序列绘制。 |

> 更新建议：若数据库迁移新增字段或语义变化，请同步此文件和 `docs/manifest.yaml`，并在相关 PR 中注明以便分析/前端及时调整。
